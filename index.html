<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Préstamo de Proyectores - ITO</title>
<style>
body { font-family: Arial; padding: 20px; background:#f0f0f0; }
h1 {
    background:#003366; color:white; padding:15px;
    border-radius:10px; text-align:center;
}
form {
    background:white; padding:20px; border-radius:10px;
    box-shadow:0 0 10px #aaa; width:400px; margin:auto;
}
label { font-weight:bold; display:block; margin-top:10px; }
input, select {
    width:100%; padding:8px; margin-top:5px;
    border:1px solid #999; border-radius:5px;
}
button {
    margin-top:15px; width:100%; padding:10px;
    background:#0066cc; color:white; border:none;
    border-radius:5px; cursor:pointer;
}
button:hover { background:#004c99; }
</style>
</head>
<body>

<h1>Bienvenido al sistema de préstamo de proyectores<br>Instituto Tecnológico de Oaxaca</h1>

<form id="form">
    <label>Nombre del alumno</label>
    <input type="text" id="nombre" required>

    <label>Número de control</label>
    <input type="text" id="control" required>

    <label>Carrera</label>
    <select id="carrera" required>
        <option>Ingeniería en Sistemas Computacionales</option>
        <option>Ingeniería Civil</option>
        <option>Ingeniería Química</option>
        <option>Ingeniería Industrial</option>
        <option>Ingeniería en Gestión Empresarial</option>
        <option>Ingeniería Mecánica</option>
        <option>Ingeniería Eléctrica</option>
        <option>Ingeniería Electrónica</option>
        <option>Licenciatura en Administración</option>
        <option>Licenciatura en Contador Público</option>
    </select>

    <label>Profesor</label>
    <input type="text" id="profesor" required>

    <label>Aula</label>
    <input type="text" id="aula" required>

    <label>Hora de clase</label>
    <select id="hora" required></select>

    <label>Material y equipo</label>
    <input type="text" id="material" value="Cañón, Cable HDMI, Cable de energía, Extensión" readonly>

    <button type="submit">Registrar préstamo</button>
</form>

<script>
// Generar horas
let h = document.getElementById("hora");
for(let i=7; i<20; i++){
    let siguiente = i+1;
    h.innerHTML += `<option>${i}:00 - ${siguiente}:00</option>`;
}

document.getElementById("form").onsubmit = function(e){
    e.preventDefault();

    let prestamos = JSON.parse(localStorage.getItem("prestamos") || "[]");

    // bloquear aula si ya está ocupada
    let aula = document.getElementById("aula").value;
    if(prestamos.some(p => p.aula === aula)){
        alert("El proyector de esta aula ya fue prestado. Debe devolverse primero.");
        return;
    }

    let registro = {
        fechaHora: new Date().toLocaleString(),
        nombre: document.getElementById("nombre").value,
        control: document.getElementById("control").value,
        carrera: document.getElementById("carrera").value,
        profesor: document.getElementById("profesor").value,
        aula: aula,
        hora: document.getElementById("hora").value,
        material: document.getElementById("material").value
    };

    prestamos.push(registro);
    localStorage.setItem("prestamos", JSON.stringify(prestamos));

    alert("Préstamo registrado correctamente.");
    document.getElementById("form").reset();
};
</script>

<br><center>
<a href="registros.html">Ver registros</a>
</center>

</body>
</html>
